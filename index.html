<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Merry Christmas</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
        <link rel="stylesheet" href="./css/index.css" />
    </head>

    <body>
        <div class="app">
            <div class="envelope-container">
                <div class="envelope-wrapper">
                    <div class="envelope">
                        <div class="card">
                            <div class="christmas-ball">
                                <img src="./img/christmas_ball.png" alt="" />
                            </div>
                        </div>
                    </div>
                    <div class="heart"></div>
                </div>
            </div>
            <div class="loading-container">
                <div class="loading-item">
                    <div class="loading-item__1"><img src="./img/christmas_1.png" alt="" /></div>
                    <div class="loading-item__2"><img src="./img/christmas_2.png" alt="" /></div>
                    <div class="loading-item__3"><img src="./img/christmas_3.png" alt="" /></div>
                    <div class="loading-item__4"><img src="./img/christmas_4.png" alt="" /></div>
                    <div class="loading-item__5"><img src="./img/christmas_5.png" alt="" /></div>
                    <div class="loading-item__6"><img src="./img/christmas_6.png" alt="" /></div>
                </div>
                <div class="progress">
                    <div
                        class="progress-bar progress-bar-striped progress-bar-animated"
                        role="progressbar"
                        style="width: 0%"
                    ></div>
                </div>
            </div>
            <div style="position: fixed; bottom: 8px">
                <a style="color: #b4d2ee" href="https://beian.miit.gov.cn/" target="_blank">备案号</a>
                <a style="color: #b4d2ee" href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2022026801号-1</a>
            </div>
        </div>
        <div style="display: none" class="christmas-ball-container">
            <div id="christmas-ball"></div>
            <div class="bottom">
                <div class="music-play-button">
                    <img src="./img/snowflake.png" alt="" srcset="" />
                </div>
                <span class="text"
                    ><span class="merry">Merry Christmas from</span>
                    <span class="author"
                        ><a href="https://github.com/TheShining" target="_blank"
                            ><img src="./img/snowman.png" />Shining</a
                        ></span
                    ></span
                >
            </div>
        </div>
        <script src="./js/pace.min.js"></script>
        <script src="./js/loadingProgress.js"></script>
        <script src="./js/three.min.js"></script>
        <script src="./js/OrbitControls.js"></script>
        <script src="./js/GLTFLoader.js"></script>
        <script src="./js/RGBELoader.js"></script>
        <script src="./js/RoughnessMipmapper.js"></script>
        <script src="./js/postprocessing.min.js"></script>
        <script src="./js/index.js"></script>
        <script>
            const loading = document.querySelector('.app');
            const envelopeContainer = document.querySelector('.envelope-container');

            // 开启信封
            const christmasBallContainer = document.querySelector('.christmas-ball-container');
            const envelopeWrapper = document.querySelector('.envelope-wrapper');
            const heart = document.querySelector('.envelope-wrapper .heart');

            heart.addEventListener('click', () => {
                const enveloperClassList = envelopeWrapper.classList;
                if (enveloperClassList.contains('flap')) {
                    // envelopeWrapper.classList.remove('flap');
                } else {
                    envelopeWrapper.classList.add('flap');
                    envelopeContainer.classList.add('envelope-magnify');
                    loading.classList.add('hide');
                    setTimeout(() => {
                        loading.style.display = 'none';
                        christmasBallContainer.style.display = '';
                    }, 5000);
                }
            });
        </script>
    </body>
</html>
